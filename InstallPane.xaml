<?xml version="1.0" encoding="utf-8" ?>
<UserControl
  x:Class="SuiteInstaller.InstallPane"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="using:SuiteInstaller"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Visibility="{Binding HaveInstall, Mode=OneWay, Converter={StaticResource BoolToVisibilityConv}}"
  mc:Ignorable="d">

  <Grid MaxWidth="400">
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Grid
      Grid.Row="0"
      Margin="0,0,10,10"
      Padding="14,16,14,16"
      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
      CornerRadius="10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <Grid Margin="5,5,5,10">
        <TextBlock
          FontSize="15"
          FontWeight="SemiBold"
          Text="Applications to install" />
      </Grid>
      <ListView
        x:Name="InstallingPrereq"
        Grid.Row="1"
        MinWidth="320"
        Margin="5"
        IsItemClickEnabled="False"
        IsSwipeEnabled="False"
        ItemContainerStyle="{StaticResource IndentedListViewItemStyle}"
        ItemsSource="{Binding Prerequisites, Mode=OneWay}"
        SelectionMode="None">
        <ListView.ItemTemplate>
          <DataTemplate x:DataType="local:Prerequisite">
            <Grid
              Height="50"
              HorizontalAlignment="Stretch"
              BorderThickness="1"
              CornerRadius="{StaticResource ControlCornerRadius}">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>

              <Grid Width="50" CornerRadius="{ThemeResource ControlCornerRadius}">
                <Image
                  x:Name="ConnectedIcon"
                  Width="35"
                  Height="35"
                  VerticalAlignment="Center"
                  Source="{x:Bind Icon}"
                  Stretch="Fill" />
              </Grid>
              <Grid
                Grid.Column="1"
                Margin="10,0,5,0"
                VerticalAlignment="Center">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock
                  FontSize="13"
                  Style="{StaticResource BodyStrongTextBlockStyle}"
                  Text="{x:Bind Title}"
                  TextWrapping="NoWrap" />

                <TextBlock
                  Name="ActionData"
                  Grid.Row="1"
                  Margin="0,5,0,0"
                  FontSize="12"
                  Text="{x:Bind CurrentAction, Mode=OneWay}"
                  />

                <!--Visibility="{Binding InstallInProgress, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConv}}" -->

                <ProgressBar
                  Name="ProgressData"
                  Grid.Row="2"
                  HorizontalAlignment="Stretch"
                  IsIndeterminate="True"
                  Maximum="{x:Bind TotalRange, Mode=TwoWay}"
                  Minimum="0"
                  Visibility="{Binding InstallInProgress, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConv}}"
                  Value="{x:Bind ProgressValue, Mode=OneWay}" />
                <ProgressBar
                  Name="ProgressDownload"
                  Grid.Row="2"
                  HorizontalAlignment="Stretch"
                  IsIndeterminate="False"
                  Maximum="{x:Bind TotalRange, Mode=TwoWay}"
                  Minimum="0"
                  Visibility="{Binding DownloadInProgress, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConv}}"
                  Value="{x:Bind ProgressValue, Mode=OneWay}" />
              </Grid>

              <StackPanel
                Grid.Column="3"
                Margin="5"
                VerticalAlignment="Center"
                Orientation="Vertical">
                <Button
                  x:Name="CancelButton"
                  Height="35"
                  Background="Transparent"
                  BorderThickness="0"
                  Click="CancelButton_Click"
                  DataContext="{Binding}"
                  Visibility="{Binding ShowRemoveBtn, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConv}}">
                  <FontIcon FontSize="15" Glyph="&#xE711;" />
                </Button>
              </StackPanel>
            </Grid>
          </DataTemplate>
        </ListView.ItemTemplate>
      </ListView>
      <Grid Grid.Row="2" HorizontalAlignment="Stretch">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Button
          Name="RemoveAll"
          Grid.Column="0"
          Width="150"
          Height="30"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Background="Transparent"
          BorderThickness="0"
          Click="RemoveAll_Click"
          Content="Cancel" />
        <Button
          Name="Install"
          Grid.Column="1"
          Height="30"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Click="Install_Click"
          Content="Install"
          IsEnabled="{Binding InvInstallInProgress, Mode=TwoWay}"
          Style="{StaticResource CustomButtonStyle}" />
      </Grid>
    </Grid>

  </Grid>
</UserControl>
