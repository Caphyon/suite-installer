<?xml version="1.0" encoding="utf-8" ?>
<Page
  x:Class="SuiteInstaller.PrerequisitePage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="using:SuiteInstaller"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d">

  <Grid Name="MainGrid">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Grid
      Grid.Column="0"
      HorizontalAlignment="Stretch"
      Background="{ThemeResource SettingsPageBackground}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition
          Width="*"
          MinWidth="150"
          MaxWidth="370" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <Grid
        Name="animatedGrid"
        Grid.Column="0"
        Margin="0,0,10,10"
        HorizontalAlignment="Stretch"
        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
        CornerRadius="10">
        <StackPanel
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Orientation="Vertical">
          <Grid Width="150" CornerRadius="{ThemeResource ControlCornerRadius}">
            <Image
              x:Name="Icon"
              Width="150"
              VerticalAlignment="Center"
              Source="{Binding Icon}"
              Stretch="Uniform" />
          </Grid>
          <TextBlock
            x:Name="Title"
            Margin="5,40,5,0"
            HorizontalAlignment="Center"
            FontSize="18"
            FontWeight="SemiBold"
            Text="{Binding Title}"
            TextAlignment="Center"
            TextWrapping="Wrap" />
          <TextBlock
            Margin="0,5,0,40"
            HorizontalAlignment="Center"
            FontSize="14"
            Text="{Binding Publisher}" />
          <Grid>
            <Button
              Name="InstallButton"
              Height="40"
              HorizontalAlignment="Center"
              VerticalAlignment="Bottom"
              Click="InstallButton_Click"
              Content="Add"
              Style="{StaticResource CustomButtonStyle}"
              Visibility="{Binding WaitingForInstall, Mode=TwoWay, Converter={StaticResource BoolInvToVisibilityConv}}" />
            <Button
              Name="OpenButton"
              Height="40"
              HorizontalAlignment="Center"
              VerticalAlignment="Bottom"
              Click="OpenButton_Click"
              Content="Open"
              Style="{StaticResource CustomButtonStyle}"
              Visibility="{Binding HasOpenPath, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConv}}" />
          </Grid>
        </StackPanel>
      </Grid>
      <ScrollViewer
        Grid.Column="1"
        Margin="0,0,0,5"
        HorizontalAlignment="Stretch"
        CornerRadius="10">
        <StackPanel Margin="0,0,10,0">
          <StackPanel
            Margin="0,0,0,10"
            Padding="20"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="10">
            <TextBlock
              Margin="0,0,0,10"
              FontSize="15"
              FontWeight="SemiBold"
              Text="Screenshots" />
            <Border
              Height="1"
              Margin="0,0,0,10"
              Background="Gray" />
            <FlipView
              x:Name="HomeFlipView"
              MaxHeight="500"
              Background="Transparent"
              FlowDirection="LeftToRight"
              ItemsSource="{Binding Images}">

              <FlipView.ItemTemplate>
                <DataTemplate>
                  <Image
                    HorizontalAlignment="Stretch"
                    Source="{Binding}"
                    Stretch="Uniform"
                    Tapped="Image_Tapped" />
                </DataTemplate>
              </FlipView.ItemTemplate>

              <FlipView.ItemContainerStyle>
                <Style TargetType="FlipViewItem">
                  <Setter Property="Width" Value="600" />
                  <Setter Property="CornerRadius" Value="20" />
                  <Setter Property="MaxWidth" Value="700" />
                  <Setter Property="Margin" Value="0,0,20,0" />
                  <Setter Property="IsTabStop" Value="False" />
                  <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
              </FlipView.ItemContainerStyle>
            </FlipView>
          </StackPanel>
          <StackPanel
            MaxHeight="300"
            Margin="0,0,0,10"
            Padding="20"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="10">
            <TextBlock
              Margin="0,0,0,10"
              FontSize="15"
              FontWeight="SemiBold"
              Text="Description" />
            <Border
              Height="1"
              Margin="0,0,0,10"
              Background="Gray" />
            <StackPanel>
              <RichTextBlock Margin="0,0,0,10" TextWrapping="Wrap">
                <Paragraph>
                  <Run Text="{Binding Description}" />
                </Paragraph>
              </RichTextBlock>
              <!--<Button Content="Show More" />-->
            </StackPanel>
          </StackPanel>
          <StackPanel
            MinHeight="200"
            Margin="0,0,0,10"
            Padding="20"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="10">
            <TextBlock
              Margin="0,0,0,10"
              FontSize="15"
              FontWeight="SemiBold"
              Text="Additional Information" />
            <Border
              Height="1"
              Margin="0,0,0,10"
              Background="Gray" />
            <Grid Padding="20">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>

              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
              </Grid.RowDefinitions>

              <!--  Published by  -->
              <Grid
                Grid.Row="0"
                Grid.Column="0"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE77B;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Published by" />
                  <TextBlock Text="{Binding Publisher}" TextWrapping="Wrap" />
                </StackPanel>
              </Grid>

              <!--  Release Date  -->
              <!--<Grid
                Grid.Row="0"
                Grid.Column="1"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE787;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Release Date" />
                  <TextBlock Text="10/18/2010" />
                </StackPanel>
              </Grid>-->

              <!--  Category  -->
              <!--<Grid
                Grid.Row="0"
                Grid.Column="2"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE8FD;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Category" />
                  <TextBlock Text="{Binding Category}" />
                </StackPanel>
              </Grid>-->

              <!--  Supported languages  -->
              <!--<Grid
                Grid.Row="1"
                Grid.Column="1"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE775;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Supported languages" />
                  <TextBlock Text="English (United States)" />
                </StackPanel>
              </Grid>-->

              <!--  Additional terms  -->
              <Grid
                Grid.Row="0"
                Grid.Column="1"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE1F7;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Additional terms" />
                  <HyperlinkButton
                    Name="EulaLink"
                    Background="Transparent"
                    BorderThickness="0"
                    Content="{Binding AdditionalTerms}"
                    NavigateUri="{Binding AdditionalTerms, Mode=OneWay}">
                    <HyperlinkButton.Style>
                      <Style TargetType="HyperlinkButton">
                        <Setter Property="Template">
                          <Setter.Value>
                            <ControlTemplate TargetType="HyperlinkButton">
                              <TextBlock
                                Foreground="{TemplateBinding Foreground}"
                                Text="{TemplateBinding Content}"
                                TextDecorations="Underline" />
                            </ControlTemplate>
                          </Setter.Value>
                        </Setter>
                      </Style>
                    </HyperlinkButton.Style>
                  </HyperlinkButton>

                </StackPanel>
              </Grid>

              <!--  Approximate size  -->
              <!--<Grid
                Grid.Row="2"
                Grid.Column="0"
                Margin="10">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <FontIcon
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  Glyph="&#xE946;" />
                <StackPanel Grid.Column="1">
                  <TextBlock FontWeight="Bold" Text="Approximate size" />
                  <TextBlock Text="10.4 MB" />
                </StackPanel>
              </Grid>-->
            </Grid>

          </StackPanel>
        </StackPanel>
      </ScrollViewer>

      <Popup
        x:Name="ImagePopup"
        IsLightDismissEnabled="False"
        VerticalOffset="-10">
        <Grid
          Width="{Binding ElementName=MainGrid, Path=ActualWidth}"
          Height="{Binding ElementName=MainGrid, Path=ActualHeight}"
          Background="Transparent">
          <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          <Button
            Grid.Row="0"
            Margin="0,20,30,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Center"
            Background="Transparent"
            BorderThickness="0"
            Click="HidePopup">
            <Button.Content>
              <FontIcon FontSize="14" Glyph="&#xE8BB;" />
            </Button.Content>
          </Button>
          <FlipView
            x:Name="PopupFlipView"
            Grid.Row="1"
            Background="Transparent"
            ItemsSource="{Binding Images}">
            <FlipView.ItemTemplate>
              <DataTemplate>
                <Image Source="{Binding}" Stretch="Uniform" />
              </DataTemplate>
            </FlipView.ItemTemplate>
          </FlipView>
        </Grid>
      </Popup>
    </Grid>

    <!--  Grid pentru blur  -->
    <Grid
      x:Name="Overlay"
      Grid.Column="0"
      Background="{ThemeResource SystemChromeAltHighColor}"
      Opacity="0.8"
      Visibility="Collapsed" />

  </Grid>
</Page>
